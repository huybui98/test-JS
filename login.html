<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="stylesheet" href="style.css" />
		<title>Login Page</title>
	</head>
	<body>
		<div class="main">
			<div class="container">
				<form action="home.html" method="GET" class="form" id="form">
					<h1 class="header">Đăng nhập</h1>
					<div class="form__item">
						<label for="username" class="label">User name</label>
						<input
							type="text"
							name="username"
							placeholder="Eg: User Name"
							class="form__username"
						/>
						<span class="form__mess"></span>
					</div>

					<div class="form__item">
						<label for="password" class="label">Password</label>
						<input
							type="password"
							name="password"
							class="form__password"
							placeholder="Please enter"
						/>
						<span class="form__mess"></span>
					</div>

					<button class="btn">Đăng nhập</button>
				</form>
			</div>
		</div>
		<script src="main.js"></script>
		<script>
			const userNameInput = form['username'];
			const passwordInput = form['password'];

			validator([
				isRequired('.form__username'),
				minLength('.form__password', 8)
			]);

			function check() {
				let isSuccess = JSON.parse(localStorage.getItem('account')).some(
					(element) =>
						element.userName === userNameInput.value &&
						element.password === passwordInput.value
				);

				if (isSuccess === true) alert('Login success');
				else {
					alert(
						'Username or password entered incorrectly. Please check again.'
					);
					event.preventDefault();
				}
			}

			form.onsubmit = function (event) {
				if (userNameInput.value === '' || passwordInput.value === '') {
					event.preventDefault();
					alert('Please enter your username or password');
				} else {
					check();
				}
			};
		</script>
	</body>
</html>
